# Клиент-серверный программный модуль информационной системы

## Оглавление

[Назначение и цель разработки](#Назначение-и-цель-разработки)

[Архитектура решения](#Архитектура-решения)

[Схема взаимодействия модулей](#Схема-взаимодействия-модулей)

[Описание реализованных функций](#Описание-реализованных-функций)

[Примеры входных и выходных данных](#Примеры-входных-и-выходных-данных)

[Тестирование системы](#Тестирование-системы)

[Инструкция по установке и запуску](#Инструкция-по-установке-и-запуску)

[Выводы по результатам работы](#Выводы-по-результатам-работы)

## 1. Назначение и цель разработки

### 1.1. Назначение

Разработанный программный модуль предназначен для обеспечения взаимодействия между клиентским приложением и серверной частью информационной системы с передачей и обработкой данных в рамках клиент-серверной архитектуры.

### 1.2. Цель разработки

Получение практического опыта по интеграции программных модулей

Реализация клиент-серверного взаимодействия

Разработка веб-интерфейса для взаимодействия с системой

## 2. Архитектура решения

### 2.1. Общая архитектура

Система построена по классической клиент-серверной архитектуре с четким разделением обязанностей:

```text
┌─────────────────┐    HTTP/JSON    ┌─────────────────┐
│                 │ ◄──────────────►│                 │
│  КЛИЕНТСКАЯ     │                 │  СЕРВЕРНАЯ      │
│  ЧАСТЬ          │                 │  ЧАСТЬ          │
│  (client.py)    │                 │  (server.py)    │
│                 │                 │                 │
│  • Веб-интерфейс│                 │  • API сервер   │
│  • Форма запроса│                 │  • Бизнес-логика│
│  • Отображение  │                 │  • База данных  │
│    результатов  │                 │  • Обработка    │
└─────────────────┘                 └─────────────────┘
        ▲                                   ▲ 
        |                                   |
        ▼                                   ▼
┌─────────────────┐                 ┌─────────────────┐
│   Пользователь  │                 │   Хранилище     │
│   (браузер)     │                 │   данных        │
└─────────────────┘                 └─────────────────┘
```

### 2.2. Технологический стек

Язык программирования: Python 3.8+

Веб-фреймворк: Flask 3.0.0

Формат данных: JSON (JavaScript Object Notation)

Протокол передачи: HTTP/HTTPS

Клиент-серверное взаимодействие: REST API

### 2.3. Компоненты системы

Серверная часть (server.py)

Веб-сервер: Flask приложение на порту 5000\
API эндпоинты: RESTful интерфейс для обработки запросов\
Логика: Обработка данных, расчеты, валидация\
Хранилище данных: База данных в памяти (in-memory database)\
Логирование: Подробное логирование всех операций\

Клиентская часть (client.py)

Веб-интерфейс: Flask приложение на порту 5001\
Пользовательский интерфейс: HTML формы для ввода данных\
Отправка запросов: Интеграция с серверным API\
Отображение результатов: Визуализация ответов от сервера\
Валидация: Проверка корректности вводимых данных

## 3. Схема взаимодействия модулей

```text
КЛИЕНТ → СЕРВЕР (запрос):
{
    "method": "POST",
    "endpoint": "/api/users",
    "data": {
        "name": "Иван Иванов",
        "role": "admin"
    }
}

СЕРВЕР → КЛИЕНТ (ответ):
{
    "request_id": "550e8400-e29b-41d4-a716-446655440000",
    "status": "success",
    "method_used": "POST",
    "endpoint_used": "/api/users",
    "server_action": "создание пользователя",
    "data": {
        "id": 4,
        "name": "Иван Иванов",
        "role": "admin",
        "active": true
    },
    "message": "Пользователь Иван Иванов создан с ID 4",
    "timestamp": "2026-02-02T10:30:00.123456"
}
```

## 4. Описание реализованных функций

### 4.1. Серверные функции (API эндпоинты)

#### 4.1.1. GET /api/health

Назначение: Проверка работоспособности сервера\
Входные данные: Нет\
Выходные данные: Статус сервера и метаданные\
Код ответа: 200 (OK)

#### 4.1.2. POST /api/process

Назначение: Основной обработчик запросов\
Входные данные: JSON с методом, эндпоинтом и данными\
Выходные данные: Результат обработки или ошибка\
Код ответа: 200 (OK), 400 (Bad Request), 500 (Internal Error)

#### 4.1.3. GET /api/request/<id>

Назначение: Получение информации о запросе по ID\
Входные данные: ID запроса в URL\
Выходные данные: Детали запроса\
Код ответа: 200 (OK), 404 (Not Found)\

### 4.2. Логика сервера

#### 4.2.1. Работа с пользователями (/api/users)

GET: Получение списка всех пользователей\
POST: Создание нового пользователя\
PUT: Обновление данных пользователя\
DELETE: Удаление пользователя

#### 4.2.2. Работа с товарами (/api/products)

GET: Получение списка товаров\
Дополнительно: Расчет общей стоимости склада\

#### 4.2.3. Работа с заказами (/api/orders)

GET: Получение списка заказов\
POST: Создание нового заказа\
Дополнительно: Генерация трек-номера заказа\

#### 4.2.4. Расчет стоимости (/api/calculate)

POST: Расчет стоимости товара с учетом скидок\
Логика: Скидка 10% при заказе от 3 единиц товара\

### 4.3. Клиентские функции

#### 4.3.1. Веб-интерфейс

Главная страница: Форма для отправки запросов\
Валидация данных: Проверка JSON формата\
Примеры запросов: Быстрый выбор типовых запросов\
Отображение результатов: Форматированный вывод ответов

#### 4.3.2. Обработка ошибок

Ошибки соединения: Сообщение о недоступности сервера\
Таймауты: Уведомление о превышении времени ожидания\
Невалидные данные: Предупреждения о некорректном вводе

## 5. Примеры входных и выходных данных

### 5.1. Пример 1: Получение списка пользователей

Клиент → Сервер:

```json
{
    "method": "GET",
    "endpoint": "/api/users",
    "data": {}
}
```

Сервер → Клиент:

```json
{
    "request_id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
    "status": "success",
    "method_used": "GET",
    "endpoint_used": "/api/users",
    "server_action": "получение пользователей",
    "data": [
        {
            "id": 1,
            "name": "Иван Иванов",
            "role": "admin",
            "active": true
        },
        {
            "id": 2,
            "name": "Петр Петров",
            "role": "user",
            "active": true
        }
    ],
    "message": "Найдено 2 пользователя",
    "timestamp": "2026-02-02T10:35:22.456789"
}
```

### 5.2. Пример 2: Создание нового пользователя

Клиент → Сервер:

```json
{
    "method": "POST",
    "endpoint": "/api/users",
    "data": {
        "name": "Мария Смирнова",
        "role": "manager",
        "email": "maria@example.com"
    }
}
```

Сервер → Клиент:

```json
{
    "request_id": "b2c3d4e5-f6a7-8901-bcde-f23456789012",
    "status": "success",
    "method_used": "POST",
    "endpoint_used": "/api/users",
    "server_action": "создание пользователя",
    "data": {
        "id": 3,
        "name": "Мария Смирнова",
        "role": "manager",
        "active": true,
        "email": "maria@example.com"
    },
    "message": "Пользователь Мария Смирнова создан с ID 3",
    "timestamp": "2026-02-02T10:40:15.987654"
}
```

### 5.3. Пример 3: Расчет стоимости товара

Клиент → Сервер:

```json
{
    "method": "POST",
    "endpoint": "/api/calculate",
    "data": {
        "product_id": 1,
        "quantity": 5
    }
}
```

Сервер → Клиент:

```json
{
    "request_id": "c3d4e5f6-a7b8-9012-cdef-345678901234",
    "status": "success",
    "method_used": "POST",
    "endpoint_used": "/api/calculate",
    "server_action": "расчет стоимости",
    "data": {
        "product_name": "Ноутбук",
        "product_id": 1,
        "unit_price": 50000,
        "quantity": 5,
        "total_without_discount": 250000,
        "discount_percent": 10,
        "discount_amount": 25000,
        "final_price": 225000,
        "currency": "RUB",
        "calculation_time": "2026-02-02T10:45:30.123456",
        "has_discount": true,
        "saved_money": 25000
    },
    "message": "Стоимость 5 шт. товара 'Ноутбук': 225000.00 руб. (скидка 10%, экономия 25000.00 руб.)",
    "timestamp": "2026-02-02T10:45:30.123456"
}
```

### 5.4. Пример 4: Обработка ошибки

Клиент → Сервер (некорректные данные):

```json
{
    "method": "POST",
    "endpoint": "/api/users",
    "data": {
        "role": "admin"
    }
}
```

Сервер → Клиент (ответ с ошибкой):

```json
{
    "request_id": "d4e5f6a7-b8c9-0123-def4-567890123456",
    "status": "error",
    "method_used": "POST",
    "endpoint_used": "/api/users",
    "server_action": "создание пользователя",
    "error": "Не хватает данных (требуется name и role)",
    "data": null,
    "message": null,
    "timestamp": "2026-02-02T10:50:45.654321"
}
```

## 6. Тестирование системы

### 6.1. Виды проведенных тестов

#### 6.1.1. Функциональное тестирование

Позитивные сценарии: Проверка корректной обработки валидных запросов\
Негативные сценарии: Обработка некорректных данных и ошибок

#### 6.1.2. Интеграционное тестирование

Взаимодействие клиент-сервер: Проверка полного цикла обработки запроса\
Обработка сетевых ошибок: Тестирование при недоступности сервера\
Производительность: Оценка времени отклика системы

#### 6.1.3. Тестирование пользовательского интерфейса

Удобство использования: Проверка интуитивности интерфейса\
Валидация ввода: Проверка корректности проверки данных\
Отображение результатов: Проверка читаемости вывода

### 6.2. Результаты тестирования

|Тестовый сценарий|Статус|Комментарий|
|-|:---:|---|
|Корректный запрос GET /api/users| Успешно|Возвращает список пользователей|
|Создание пользователя без имени| Успешно|Возвращает ошибку валидации|
|Расчет стоимости с дисконтом| Успешно|Правильно применяет скидку 10%|
|Отправка некорректного JSON| Успешно|Корректная обработка ошибки парсинга|
|Недоступность сервера| Успешно|Понятное сообщение об ошибке|
|Таймаут соединения| Успешно|Сообщение о превышении времени ожидания|
|Кириллические символы| Успешно|Корректная обработка UTF-8|

## 7. Инструкция по установке и запуску

### 7.1. Требования к системе

#### 7.1.1. Аппаратные требования

Процессор: 1 ГГц или выше\
Оперативная память: 512 МБ (минимум), 1 ГБ (рекомендуется)\
Свободное место на диске: 50 МБ

#### 7.1.2. Программные требования

Операционная система: Windows 10/11, macOS 10.15+, Linux Ubuntu 20.04+\
Python: версия 3.8 или выше\
Дополнительно: браузер для работы с веб-интерфейсом

### 7.2. Пошаговая инструкция установки

#### 7.2.1. Архитектура проекта

```text
project/
├── server.py          # Сервер (API)
├── client.py          # Клиент (веб-интерфейс)
├── requirements.txt
├── templates/
│   ├── index.html
│   └── result.html
└── static/
    └── style.css
```

#### 7.2.2 Сама установка

Шаг 1: Подготовка рабочей среды

```bash
# 1. Создайте папку для проекта
mkdir client_server_module
cd client_server_module

# 2. Создайте виртуальное окружение Python
python -m venv venv

# 3. Активируйте виртуальное окружение
# Для Windows:
venv\Scripts\activate
# Для Mac/Linux:
source venv/bin/activate
```

Шаг 2: Установка зависимостей

```bash
# 4. Создайте файл requirements.txt со следующим содержанием:
# Flask==3.0.0
# requests==2.31.0

# 5. Установите зависимости
pip install -r requirements.txt
```

Шаг 3: Создание структуры проекта

```bash
# 6. Создайте необходимые файлы и папки
mkdir templates
mkdir static

# 7. Создайте файлы:
# - server.py (код сервера)
# - client.py (код клиента)
# - templates/index.html (форма запроса)
# - templates/result.html (страница результата)
# - static/style.css (стили, опционально)
```

Шаг 4: Копирование исходного кода

Скопируйте код из соответствующих файлов, предоставленных в отчете:

server.py - серверная часть\
client.py - клиентская часть\
templates/index.html - форма запроса\
templates/result.html - страница результата

### 7.3. Запуск системы

Вариант 1: Запуск в двух терминалах (рекомендую)\
Терминал 1 - Запуск сервера:

```bash
# Активируйте venv если еще не активирован
venv\Scripts\activate  # Windows
# или source venv/bin/activate  # Mac/Linux

# Запустите сервер
python server.py
```

Терминал 2 - Запуск клиента:

```bash
# Откройте новый терминал в той же папке
cd client_server_module
venv\Scripts\activate  # Активируйте venv

# Запустите клиент
python client.py
Вариант 2: Быстрая проверка через curl
bash
# Проверка здоровья сервера
curl http://localhost:5000/api/health

# Отправка тестового запроса
curl -X POST http://localhost:5000/api/process \
  -H "Content-Type: application/json" \
  -d '{"method": "GET", "endpoint": "/api/users", "data": {}}'
```

### 7.4. Использование системы

Запустите сервер и клиент как описано выше\
Откройте браузер и перейдите по адресу: http://localhost:5001

Заполните форму:

Выберите метод HTTP (GET, POST, PUT, DELETE)\
Выберите эндпоинт (/api/users, /api/products и т.д.)\
Введите данные в формате JSON\
Нажмите "Отправить запрос на сервер"\
Просмотрите результат на открывшейся странице\

### 7.5. Устранение неполадок

Проблема 1: Порт уже используется

```text
Ошибка: [Errno 48] Address already in use
```

Решение: Измените порт в файле server.py или client.py:

```python
# В server.py измените строку:
server_app.run(host='127.0.0.1', port=5000)  # на другой порт, например 5002

# В client.py измените строку:
SERVER_URL = "http://127.0.0.1:5000"  # на тот же порт, что и сервер
```

Проблема 2: Ошибка импорта модулей

```text
ImportError: No module named 'flask'
```

Решение: Убедитесь, что виртуальное окружение активировано и зависимости установлены:

```bash
venv\Scripts\activate  # Активируйте venv
pip install -r requirements.txt  # Установите зависимости
```

Проблема 3: Клиент не может подключиться к серверу

```text
Ошибка подключения к серверу
```

Решение: Проверьте:

Сервер запущен (python server.py)\
Правильный URL в client.py (SERVER_URL)\
Отсутствие блокировки брандмауэром

## 8. Выводы по результатам работы

### 8.1. Достигнутые результаты

- [x] Успешно разработан клиент-серверный модуль с четким разделением ответственности между компонентами

- [x] Реализовано полное взаимодействие по схеме "клиент → сервер → клиент" с использованием HTTP/JSON

- [x] Создан RESTful API с поддержкой основных HTTP методов (GET, POST, PUT, DELETE)

- [x] Разработан интуитивный веб-интерфейс для взаимодействия с системой

- [x] Реализована логика обработки данных с учетом различных сценариев использования

- [x] Обеспечена обработка ошибок на всех уровнях системы

- [x] Задокументирована архитектура и процесс взаимодействия компонентов системы
