<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–†–µ–∑—É–ª—å—Ç–∞—Ç –∑–∞–ø—Ä–æ—Å–∞</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Arial, sans-serif; background: #f5f5f5; padding: 20px; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 30px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        h1 { color: #333; margin-bottom: 10px; }
        .btn-back { display: inline-block; margin-bottom: 20px; color: #007bff; text-decoration: none; font-weight: bold; padding: 8px 16px; border: 1px solid #007bff; border-radius: 5px; }
        .btn-back:hover { background: #007bff; color: white; }
        .card { padding: 20px; border-radius: 8px; margin-bottom: 20px; }
        .success { background: #d4edda; color: #155724; border-left: 5px solid #28a745; }
        .error { background: #f8d7da; color: #721c24; border-left: 5px solid #dc3545; }
        pre { background: #2d3748; color: #e2e8f0; padding: 15px; border-radius: 5px; overflow: auto; margin-top: 10px; font-family: 'Courier New', monospace; font-size: 14px; white-space: pre-wrap; }
        table { width: 100%; border-collapse: collapse; margin: 15px 0; }
        td { padding: 10px; border-bottom: 1px solid #dee2e6; }
        td:first-child { font-weight: bold; width: 40%; }
        .status-success { background: #28a745; color: white; padding: 3px 10px; border-radius: 20px; font-size: 14px; }
        .status-error { background: #dc3545; color: white; padding: 3px 10px; border-radius: 20px; font-size: 14px; }
        .server-action { background: #e9ecef; padding: 10px; border-radius: 5px; margin: 10px 0; font-style: italic; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìä –†–µ–∑—É–ª—å—Ç–∞—Ç –∑–∞–ø—Ä–æ—Å–∞</h1>
        <a href="/" class="btn-back">‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Ñ–æ—Ä–º–µ</a>

        {% if result.status == 'error' %}
        <div class="card error">
            <h2>‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –∑–∞–ø—Ä–æ—Å–∞</h2>
            <p><strong>{{ result.error }}</strong></p>
            {% if result.message %}
            <p>{{ result.message }}</p>
            {% endif %}
            
            {% if result.request_id %}
            <div style="margin-top: 15px;">
                <p><strong>ID –∑–∞–ø—Ä–æ—Å–∞:</strong> {{ result.request_id }}</p>
                <p><strong>–í—Ä–µ–º—è:</strong> {{ result.timestamp }}</p>
            </div>
            {% endif %}
        </div>
        {% else %}
        <div class="card success">
            <h2>‚úÖ –ó–∞–ø—Ä–æ—Å –≤—ã–ø–æ–ª–Ω–µ–Ω —É—Å–ø–µ—à–Ω–æ</h2>
            
            <div class="server-action">
                <strong>–î–µ–π—Å—Ç–≤–∏–µ —Å–µ—Ä–≤–µ—Ä–∞:</strong> {{ result.server_action }}
            </div>
            
            <h3>üìã –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–ø—Ä–æ—Å–µ:</h3>
            <table>
                <tr><td>ID –∑–∞–ø—Ä–æ—Å–∞:</td><td><code>{{ result.request_id }}</code></td></tr>
                <tr><td>–°—Ç–∞—Ç—É—Å:</td><td><span class="status-success">{{ result.status }}</span></td></tr>
                <tr><td>–ú–µ—Ç–æ–¥:</td><td>{{ result.method_used }}</td></tr>
                <tr><td>–≠–Ω–¥–ø–æ–∏–Ω—Ç:</td><td><code>{{ result.endpoint_used }}</code></td></tr>
                <tr><td>–°–æ–æ–±—â–µ–Ω–∏–µ:</td><td>{{ result.message }}</td></tr>
                <tr><td>–í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏:</td><td>{{ result.timestamp }}</td></tr>
            </table>

            {% if result.data %}
            <h3>üì¶ –†–µ–∑—É–ª—å—Ç–∞—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–µ—Ä–≤–µ—Ä–æ–º:</h3>
            <pre>{{ result.data | tojson_pretty }}</pre>
            {% endif %}
        </div>
        {% endif %}
    </div>
</body>
</html>